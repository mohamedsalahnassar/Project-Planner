<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Team Functions</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container py-4">
        <h1>Test Team Member Functions</h1>
        <p>This page tests if the team member functions are accessible.</p>
        
        <div class="card">
            <div class="card-body">
                <div id="members-container">
                    <!-- Members will be populated here -->
                </div>
                <button type="button" class="btn btn-primary mt-2" onclick="testAddMember()">
                    <i class="bi bi-plus"></i> Test Add Member
                </button>
                <button type="button" class="btn btn-secondary mt-2" onclick="testFunctions()">
                    <i class="bi bi-check"></i> Test All Functions
                </button>
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-body">
                <h5>Test Results:</h5>
                <div id="test-results"></div>
            </div>
        </div>
    </div>

    <script type="module">
        import { getTeamSizes, getTeamSizesForDate } from './data.js';
        
        // Set up test data
        window.currentTeamData = {
            id: 'test-team',
            name: 'Test Team',
            members: []
        };

        // Mock functions that are needed
        window.effortTypes = function() {
            return ['BE', 'iOS', 'Android', 'Online', 'QA'];
        };

        window.escapeHtml = function(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        };

        // Test functions
        window.testAddMember = function() {
            try {
                if (typeof window.addMember === 'function') {
                    window.addMember();
                    document.getElementById('test-results').innerHTML += '<div class="alert alert-success">✅ addMember function works!</div>';
                } else {
                    document.getElementById('test-results').innerHTML += '<div class="alert alert-danger">❌ addMember function not found!</div>';
                }
            } catch (error) {
                document.getElementById('test-results').innerHTML += `<div class="alert alert-danger">❌ addMember error: ${error.message}</div>`;
            }
        };

        window.testFunctions = function() {
            const results = document.getElementById('test-results');
            results.innerHTML = '';
            
            // Test getTeamSizes
            try {
                const testTeam = {
                    members: [
                        { id: '1', name: 'Test Member', specialty: 'BE', startDate: '2024-01-01' }
                    ]
                };
                const sizes = getTeamSizes(testTeam);
                if (sizes && sizes.BE === 1) {
                    results.innerHTML += '<div class="alert alert-success">✅ getTeamSizes works!</div>';
                } else {
                    results.innerHTML += '<div class="alert alert-warning">⚠️ getTeamSizes returned unexpected result</div>';
                }
            } catch (error) {
                results.innerHTML += `<div class="alert alert-danger">❌ getTeamSizes error: ${error.message}</div>`;
            }

            // Test team member functions
            const functionsToTest = ['addMember', 'removeMember', 'updateMemberField', 'refreshMembersList', 'validateMember'];
            
            functionsToTest.forEach(funcName => {
                if (typeof window[funcName] === 'function') {
                    results.innerHTML += `<div class="alert alert-success">✅ ${funcName} function is accessible</div>`;
                } else {
                    results.innerHTML += `<div class="alert alert-danger">❌ ${funcName} function not found!</div>`;
                }
            });
        };
    </script>
</body>
</html>
