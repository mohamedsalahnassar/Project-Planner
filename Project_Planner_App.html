<!doctype html>
<html lang="en" data-bs-theme="dark">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Project Planner (v20)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    :root{
      --bg-grad-start:#0e1e45; --bg-grad-end:transparent;
      --ios:#4e79a7; --android:#59a14f; --web:#f28e2c; --be:#9c755f; --qa:#edc948;
      --label-pad: 180px;
    }
    body{background-image: radial-gradient(1200px 700px at 15% -10%, var(--bg-grad-start) 0%, var(--bg-grad-end) 60%); background-attachment: fixed;}
    .app-header{position:sticky;top:0;z-index:1030;background:rgba(0,0,0,.35);backdrop-filter:blur(6px);border-bottom:1px solid rgba(255,255,255,.08);}
    .pointer{cursor:pointer}
    .card-hover{transition:box-shadow .2s, transform .1s; cursor:pointer}
    .card-hover:hover{box-shadow:0 8px 30px rgba(0,0,0,.25); transform:translateY(-2px)}
    .mini-timeline{border-radius:.5rem;border:1px solid var(--bs-border-color); overflow:hidden}
    .mini-phase{height:8px;background:var(--bs-border-color);opacity:.6; position:relative}
    .mini-platforms{height:8px;display:flex}
    .seg{height:8px}
    .gantt-wrap{border:1px solid var(--bs-border-color); border-radius:.75rem; overflow:hidden}
    .gantt-toolbar{position:sticky;top:0;z-index:2;background:var(--bs-body-bg);border-bottom:1px solid var(--bs-border-color)}
    .gantt{position:relative; height:540px; overflow:auto; cursor:grab}
    .gantt:active{cursor:grabbing}
    .gantt .content{position:relative}
    .ruler{position:sticky; top:0; height:60px; background:linear-gradient(180deg, var(--bs-body-bg), var(--bs-body-bg) 62%, transparent); margin-left:var(--label-pad); border-bottom:1px solid var(--bs-border-color); z-index:1}
    .tick{position:absolute; bottom:0; width:1px; height:12px; background:rgba(127,127,127,.35)}
    .tick.major{height:24px; background:rgba(127,127,127,.6)}
    .tick.week{height:18px; background:rgba(127,127,127,.5)}
    .label{position:absolute; bottom:24px; transform:translateX(-50%); font-size:.75rem; color:var(--bs-secondary-color)}
    .week-label{position:absolute; bottom:34px; transform:translateX(-50%); font-size:.7rem; color:var(--bs-secondary-color)}
    .month{position:absolute; bottom:44px; transform:translateX(-50%); font-weight:600; color:var(--bs-body-color); font-size:.8rem}
    .grid{position:absolute; left:0; right:0; top:60px; bottom:0; pointer-events:none}
    .gridline{position:absolute; top:0; bottom:0; width:1px; background:rgba(127,127,127,.15)}
    .gridline.week{background:rgba(127,127,127,.22)}
    .gridline.major{background:rgba(127,127,127,.28)}
    .sprint-line{position:absolute; top:60px; bottom:0; width:2px; background:rgba(220,53,69,.6); pointer-events:none}
    .sprint-label{position:absolute; top:60px; transform:translate(-50%,-100%); font-size:.75rem; color:#fff; background:rgba(220,53,69,.6); padding:1px 4px; border-radius:4px; pointer-events:none}
    .hover-line{position:absolute; top:60px; bottom:0; width:1px; background:rgba(255,255,255,.3); pointer-events:none; display:none}
    .hover-label{position:absolute; top:0; transform:translateX(-50%); font-size:.75rem; color:var(--bs-body-color); background:var(--bs-body-bg); border:1px solid var(--bs-border-color); padding:1px 4px; border-radius:4px; pointer-events:none; display:none}
    .lane{position:relative; height:64px; border-bottom:1px dashed var(--bs-border-color); display:flex; align-items:center}
    .lane-label{position:absolute; left:12px; top:18px; width:160px; font-weight:600}
    .bar{position:absolute; top:16px; height:32px; border-radius:.5rem; display:flex; align-items:center; padding:0 .6rem; color:#000; font-weight:700; border:1px solid rgba(0,0,0,.18); user-select:none}
    .phase-tag{position:absolute; top:66px; height:20px; padding:0 .5rem; border:1px dashed var(--bs-border-color); border-radius:.5rem; font-size:.75rem; display:flex; align-items:center; color:var(--bs-secondary-color)}
    .phase-badge{background:var(--bs-secondary);color:#fff}
    .badge-lane{display:inline-flex;align-items:center;gap:.3rem}
    .badge-lane .dot{width:.7rem;height:.7rem;border-radius:50%}
    .pdf-sheet{width:1100px; margin:0 auto; padding:24px}
    .pdf-h1{font-size:24px; font-weight:700}
    .pdf-h2{font-size:20px; font-weight:700; margin-top:16px}
    .pdf-h3{font-size:16px; font-weight:700; margin-top:12px}
    .pdf-meta{color:#6c757d; font-size:.9rem}
    .pdf-card{border:1px solid #dee2e6; border-radius:12px; padding:16px; margin-top:12px}
    #phaseTaskContainers{min-height:360px}
    .pt-box{width:260px; display:flex; flex-direction:column; height:100%}
    .pt-pool-box{width:300px}
    .pt-drop{flex:1; min-height:60px; overflow:auto}
    .pt-task{cursor:move; font-size:.875rem; border:1px solid var(--bs-border-color); border-radius:.25rem; padding:2px 6px; background:var(--bs-tertiary-bg); display:flex; align-items:center; gap:.25rem}
    .pt-task.selected{outline:2px solid var(--bs-link-color); background:var(--bs-secondary-bg)}
    .pt-task .pt-remove{cursor:pointer}
    .pt-tags{display:flex; flex-wrap:wrap; gap:.25rem}
    .pt-matrix-wrapper{max-height:420px;overflow:auto}
    #phaseTaskMatrix th{position:sticky;top:0;background:var(--bs-body-bg)}
    #phaseTaskMatrix th:first-child{position:sticky;left:0;background:var(--bs-body-bg);z-index:2}
    #phaseTaskMatrix td:first-child{position:sticky;left:0;background:var(--bs-body-bg);z-index:1}
  </style>
</head>
<body>
  <header class="app-header py-2 px-3">
    <div class="d-flex align-items-center justify-content-between gap-2">
      <div class="d-flex align-items-center gap-3">
        <div>
          <h1 class="h5 mb-0">Project Planner <span class="text-secondary">(v20)</span></h1>

<div class="small text-secondary">Start: <b id="startLabel">2025-08-13</b> • Efficiency: <b id="effLabel">0.8</b> md/eng/day • Local JSON persistence</div>
        </div>
        <div class="d-flex align-items-center gap-2">
          <span class="small text-secondary">Theme</span>
          <select id="themeSelect" class="form-select form-select-sm"></select>
        </div>
      </div>
      <div class="d-flex align-items-center gap-2">
        <div class="btn-group" role="group">
          <button id="btn-manage" class="btn btn-outline-primary"><i class="bi bi-sliders"></i> Configure</button>
          <div class="btn-group">
            <button class="btn btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown"><i class="bi bi-database"></i> Data</button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" id="exportTasksCSV"><i class="bi bi-filetype-csv me-1"></i>Export Tasks (CSV)</a></li>
              <li><a class="dropdown-item" id="exportTasksXLSX"><i class="bi bi-filetype-xlsx me-1"></i>Export Tasks (Excel)</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><label class="dropdown-item pointer mb-0">
                <i class="bi bi-box-arrow-in-down me-1"></i>Import Tasks (CSV/Excel)
                <input id="importTasks" type="file" accept=".csv, .xlsx, .xls" hidden>
              </label></li>
            </ul>
          </div>
          <div class="btn-group">
            <button class="btn btn-outline-success dropdown-toggle" data-bs-toggle="dropdown"><i class="bi bi-filetype-xlsx"></i> Export Excel</button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" id="btn-export-project-xlsx-styled"><i class="bi bi-palette me-1"></i>Project (Styled)</a></li>
              <li><a class="dropdown-item" id="btn-export-plan-xlsx-styled"><i class="bi bi-palette me-1"></i>Plan (Styled)</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" id="btn-export-project-xlsx"><i class="bi bi-table me-1"></i>Project (Basic)</a></li>
              <li><a class="dropdown-item" id="btn-export-plan-xlsx"><i class="bi bi-table me-1"></i>Plan (Basic)</a></li>
            </ul>
          </div>
          <button id="btn-export" class="btn btn-outline-secondary"><i class="bi bi-box-arrow-down"></i> Export JSON</button>
          <label class="btn btn-outline-secondary mb-0 pointer">
            <i class="bi bi-upload"></i> Import <input id="file-import" type="file" accept=".json" hidden>
          </label>
          <button id="btn-reset" class="btn btn-outline-danger"><i class="bi bi-arrow-counterclockwise"></i> Reset</button>
        </div>
      </div>
    </div>
  </header>

  <main class="container-xxl py-3">
    <div id="projectsLayer" class="row g-3"></div>

    <div id="plansLayer" style="display:none">
      <div class="d-flex align-items-center justify-content-between mb-2">
        <div class="d-flex align-items-center gap-2">
          <button id="btn-back-projects" class="btn btn-outline-secondary btn-sm"><i class="bi bi-arrow-left"></i> Projects</button>
          <h2 id="plans-title" class="h6 mb-0"></h2>
        </div>
        <div class="d-flex align-items-center gap-2">
          <button id="btn-export-project-pdf" class="btn btn-primary btn-sm"><i class="bi bi-filetype-pdf"></i> Export Project PDF</button>
          <button id="btn-open-efforts" class="btn btn-outline-secondary btn-sm"><i class="bi bi-sliders"></i> Edit Task Efforts</button>
          <button id="btn-export-project-xlsx-basic" class="btn btn-success btn-sm"><i class="bi bi-filetype-xlsx"></i> Export Project Excel (Basic)</button>
        </div>
      </div>
      <div id="plansGrid" class="row g-3"></div>
    </div>

    <div id="detail" class="mt-2" style="display:none">
      <div class="d-flex align-items-center justify-content-between gap-2 mb-2">
        <div class="d-flex align-items-center gap-2">
          <button id="btn-back-plans" class="btn btn-outline-secondary btn-sm"><i class="bi bi-arrow-left"></i> Plans</button>
          <h2 id="detail-title" class="h6 mb-0"></h2>
          <span class="badge text-bg-secondary" id="detail-team"></span>
          <span class="badge text-bg-secondary">Buffer <span id="detail-buffer"></span>%</span>
        </div>
        <div class="d-flex align-items-center gap-2">
          <div id="lane-filters" class="d-flex align-items-center gap-2"></div>
          <button id="btn-export-plan-pdf" class="btn btn-primary btn-sm"><i class="bi bi-filetype-pdf"></i> Export Plan PDF</button>
          <button id="btn-export-plan-xlsx-basic" class="btn btn-success btn-sm"><i class="bi bi-filetype-xlsx"></i> Export Plan Excel (Basic)</button>
        </div>
      </div>

      <div class="gantt-wrap mb-3">
        <div class="gantt-toolbar p-2 d-flex align-items-center justify-content-between">
          <div class="d-flex align-items-center gap-2">
            <span class="small text-secondary">Zoom</span>
            <button class="btn btn-sm btn-outline-secondary" id="zoomMinus">−</button>
            <input type="range" id="zoomRange" min="6" max="44" step="2" value="18" style="width:240px">
            <button class="btn btn-sm btn-outline-secondary" id="zoomPlus">+</button>
            <button class="btn btn-sm btn-outline-secondary" id="zoomFit">Fit</button>
          </div>
          <div class="small text-secondary">Drag any bar to shift dates. Click a bar to view task breakdown.</div>
        </div>
        <div class="gantt" id="ganttScroll">
          <div class="content" id="ganttContent"></div>
        </div>
      </div>

      <div class="row row-cols-1 row-cols-lg-2 g-3">
        <div class="col">
          <div class="card h-100">
            <div class="card-header">Effort breakdown (totals by phase)</div>
            <div class="card-body">
              <div class="small text-secondary mb-2" id="detail-span"></div>
              <div class="table-responsive">
                <table id="effTable" class="table table-sm table-bordered mb-0 align-middle">
                  <thead class="table-dark"></thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card h-100">
            <div class="card-header">Team capacity &amp; structure</div>
            <div class="card-body">
              <div class="table-responsive">
                <table id="teamTable" class="table table-sm table-bordered mb-0 align-middle">
                  <thead class="table-dark"><tr><th>Role</th><th>Engineers</th></tr></thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card mt-3">
        <div class="card-header d-flex align-items-center justify-content-between">
          <span>Detailed Phase → Task effort breakdown</span>
          <div class="small text-secondary">Explicit task efforts are honored; otherwise FE/QA efforts are distributed across FE tasks in a phase.</div>
        </div>
        <div class="card-body">
          <div class="accordion" id="phaseBreakdown"></div>
        </div>
      </div>
    </div>
  </main>

  <!-- Manage Modal (CRUD Console) -->
  <div class="modal fade" id="manageModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title"><i class="bi bi-sliders"></i> Configure</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <ul class="nav nav-tabs" id="manageTabs" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="tab-projects" data-bs-toggle="tab" data-bs-target="#pane-projects" type="button" role="tab">Projects</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab-plans" data-bs-toggle="tab" data-bs-target="#pane-plans" type="button" role="tab">Delivery Plans</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab-phases" data-bs-toggle="tab" data-bs-target="#pane-phases" type="button" role="tab">Phases</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab-teams" data-bs-toggle="tab" data-bs-target="#pane-teams" type="button" role="tab">Teams</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab-sprints" data-bs-toggle="tab" data-bs-target="#pane-sprints" type="button" role="tab">Sprints</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab-tasks" data-bs-toggle="tab" data-bs-target="#pane-tasks" type="button" role="tab">Tasks</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab-phase-tasks" data-bs-toggle="tab" data-bs-target="#pane-phase-tasks" type="button" role="tab">Phase Tasks</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab-effort-types" data-bs-toggle="tab" data-bs-target="#pane-effort-types" type="button" role="tab">Effort Types</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab-efforts" data-bs-toggle="tab" data-bs-target="#pane-efforts" type="button" role="tab">Efforts</button>
  </li>
  <li class="nav-item ms-auto" role="presentation">
    <button class="nav-link" id="tab-general" data-bs-toggle="tab" data-bs-target="#pane-general" type="button" role="tab"><i class="bi bi-gear"></i> General</button>
  </li>
</ul>
          <div class="tab-content pt-3">
            <div class="tab-pane fade show active" id="pane-projects" role="tabpanel">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <div class="input-group" style="max-width:360px">
                  <span class="input-group-text"><i class="bi bi-search"></i></span>
                  <input id="search-projects" class="form-control" placeholder="Search projects">
                </div>
                <button class="btn btn-primary" id="btn-add-project"><i class="bi bi-plus-lg"></i> Add Project</button>
              </div>
              <div class="table-responsive">
                <table class="table table-hover align-middle" id="tbl-projects">
                  <thead><tr><th style="width:25%">Name</th><th>Description</th><th style="width:15%">ID</th><th style="width:160px">Actions</th></tr></thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>

            <div class="tab-pane fade" id="pane-plans" role="tabpanel">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <div class="input-group" style="max-width:360px">
                  <span class="input-group-text"><i class="bi bi-search"></i></span>
                  <input id="search-plans" class="form-control" placeholder="Search delivery plans">
                </div>
                <button class="btn btn-primary" id="btn-add-plan"><i class="bi bi-plus-lg"></i> Add Delivery Plan</button>
              </div>
              <div class="table-responsive">
                <table class="table table-hover align-middle" id="tbl-plans">
                  <thead><tr><th>Title</th><th>Project</th><th>Team</th><th>Phases</th><th>Buffer%</th><th style="width:260px">Mini Timeline</th><th style="width:160px">Actions</th></tr></thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>

            <div class="tab-pane fade" id="pane-phases" role="tabpanel">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <div class="input-group" style="max-width:360px">
                  <span class="input-group-text"><i class="bi bi-search"></i></span>
                  <input id="search-phases" class="form-control" placeholder="Search phases">
                </div>
                <button class="btn btn-primary" id="btn-add-phase"><i class="bi bi-plus-lg"></i> Add Phase</button>
              </div>
              <div class="table-responsive">
                <table class="table table-hover align-middle" id="tbl-phases">
                  <thead><tr><th style="width:25%">Title</th><th>Description</th><th style="width:10%">Order</th><th style="width:15%">ID</th><th style="width:160px">Actions</th></tr></thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>

            <div class="tab-pane fade" id="pane-teams" role="tabpanel">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <div class="input-group" style="max-width:360px">
                  <span class="input-group-text"><i class="bi bi-search"></i></span>
                  <input id="search-teams" class="form-control" placeholder="Search teams">
                </div>
                <button class="btn btn-primary" id="btn-add-team"><i class="bi bi-plus-lg"></i> Add Team</button>
              </div>
              <div class="table-responsive">
                <table class="table table-hover align-middle" id="tbl-teams">
                  <thead><tr id="teams-head"></tr></thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>

            <div class="tab-pane fade" id="pane-sprints" role="tabpanel">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <div class="input-group" style="max-width:360px">
                  <span class="input-group-text"><i class="bi bi-search"></i></span>
                  <input id="search-sprints" class="form-control" placeholder="Search sprints">
                </div>
                <div class="d-flex gap-2">
                  <button class="btn btn-outline-danger" id="btn-reset-sprints"><i class="bi bi-arrow-counterclockwise"></i> Reset</button>
                  <button class="btn btn-primary" id="btn-add-sprint"><i class="bi bi-plus-lg"></i> Add Sprint</button>
                </div>
              </div>
              <div class="table-responsive">
                <table class="table table-hover align-middle" id="tbl-sprints">
                  <thead><tr><th style="width:25%">Name</th><th style="width:20%">Start</th><th style="width:20%">End</th><th style="width:15%">ID</th><th style="width:160px">Actions</th></tr></thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>

            <div class="tab-pane fade" id="pane-tasks" role="tabpanel">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <div class="input-group" style="max-width:360px">
                  <span class="input-group-text"><i class="bi bi-search"></i></span>
                  <input id="search-tasks" class="form-control" placeholder="Search tasks">
                </div>
                <button class="btn btn-primary" id="btn-add-task"><i class="bi bi-plus-lg"></i> Add Task</button>
              </div>
              <div class="table-responsive">
                <table class="table table-hover align-middle" id="tbl-tasks">
                  <thead><tr><th style="width:28%">Title</th><th style="width:12%">Start</th><th style="width:18%">Project</th><th style="width:12%">Viable</th><th>Efforts</th><th style="width:15%">ID</th><th style="width:160px">Actions</th></tr></thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>

            <div class="tab-pane fade" id="pane-phase-tasks" role="tabpanel">
              <div class="d-flex align-items-center gap-2 mb-2">
                <label class="form-label mb-0">Project</label>
                <select id="pt-proj" class="form-select" style="max-width:240px"></select>
                <input id="pt-search" type="search" class="form-control" placeholder="Search tasks" style="max-width:260px">
                <div class="btn-group" role="group">
                  <button id="pt-view-board" class="btn btn-outline-secondary btn-sm active"><i class="bi bi-kanban"></i></button>
                  <button id="pt-view-matrix" class="btn btn-outline-secondary btn-sm"><i class="bi bi-table"></i></button>
                </div>
                <button id="pt-save" class="btn btn-primary btn-sm"><i class="bi bi-check2"></i> Save</button>
              </div>
              <div id="phaseLegend" class="mb-2 d-flex flex-wrap gap-2 small"></div>
              <div id="phaseTaskContainers" class="d-flex flex-wrap gap-3 align-items-stretch"></div>
            </div>

            <div class="tab-pane fade" id="pane-effort-types" role="tabpanel">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <div class="input-group" style="max-width:360px">
                  <span class="input-group-text"><i class="bi bi-search"></i></span>
                  <input id="search-effort-types" class="form-control" placeholder="Search effort types">
                </div>
                <button class="btn btn-primary" id="btn-add-effort-type"><i class="bi bi-plus-lg"></i> Add Effort Type</button>
              </div>
              <div class="table-responsive">
                <table class="table table-hover align-middle" id="tbl-effort-types">
                  <thead><tr><th style="width:25%">Title</th><th style="width:20%">Color</th><th style="width:15%">Key</th><th style="width:160px">Actions</th></tr></thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>

            <div class="tab-pane fade" id="pane-efforts" role="tabpanel">
  <div class="d-flex align-items-center gap-2 mb-2">
    <label class="form-label mb-0">Project</label>
    <select id="eff-proj" class="form-select" style="max-width:240px"></select>
    <input id="eff-search" class="form-control" placeholder="Search tasks" style="max-width:260px">
    <button id="eff-save" class="btn btn-primary btn-sm"><i class="bi bi-check2"></i> Save</button>
  </div>
  <div class="table-responsive">
    <table class="table table-hover align-middle" id="tbl-eff">
      <thead><tr id="eff-head"></tr></thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<div class="tab-pane fade" id="pane-general" role="tabpanel">
              <div class="row g-3">
                <div class="col-12 col-lg-6">
                  <div class="card">
                    <div class="card-header">Scheduling</div>
                    <div class="card-body vstack gap-3">
                      <div><label class="form-label">Global start date</label><input id="gen-start" type="date" class="form-control"></div>
                      <div><label class="form-label">Efficiency (md per engineer per day)</label><input id="gen-eff" type="number" step="0.05" min="0.2" max="1.2" class="form-control"></div>
                      <div><label class="form-label">Default zoom (px per day)</label><input id="gen-px" type="number" min="6" max="44" step="1" class="form-control"></div>
                      <div class="form-check form-switch"><input id="gen-rtl" class="form-check-input" type="checkbox"><label class="form-check-label" for="gen-rtl">Enable RTL layout</label></div>
                    </div>
                  </div>
                </div>
                <div class="col-12 col-lg-6">
                  <div class="card">
                    <div class="card-header">Appearance</div>
                    <div class="card-body vstack gap-3">
                      <div><label class="form-label">Theme</label>
                        <select id="gen-theme" class="form-select"></select>
                      </div>
                      <div class="small text-secondary">Themes adjust background and effort type colors. Changes persist.</div>
                    </div>
                  </div>
                </div>
                <div class="col-12">
                  <div class="d-flex gap-2">
                    <button class="btn btn-primary" id="gen-save"><i class="bi bi-check2"></i> Save Settings</button>
                    <button class="btn btn-outline-secondary" id="gen-apply-px"><i class="bi bi-arrows"></i> Apply default zoom to all plans</button>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
        <div class="modal-footer">
          <div class="text-secondary small me-auto">Storage key: <code>project_planner_v20</code></div>
          <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button class="btn btn-primary" id="btn-save-manage">Save All</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Modal -->
  <div class="modal fade" id="editModal" tabindex="-1" aria="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editTitle">Edit</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="editForm" class="vstack gap-3"></form>
        </div>
        <div class="modal-footer">
          <button class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
          <button class="btn btn-danger me-auto d-none" id="editDelete"><i class="bi bi-trash"></i> Delete</button>
          <button class="btn btn-primary" id="editSave"><i class="bi bi-check2"></i> Save</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Breakdown Modal -->
  <div class="modal fade" id="breakdownModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="breakdownTitle">Task Breakdown</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <ul class="nav nav-tabs mb-3" id="bdTabs"></ul>
          <div id="bdContent"></div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="position-fixed top-0 start-0 p-3" style="z-index:1080">
    <div id="appToast" class="toast text-bg-dark border-0" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="d-flex">
        <div class="toast-body" id="toastBody">Saved</div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
    </div>
  </div>

  <!-- libs -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <script type="module" src="./dist/main.js"></script>
</body>
</html>
